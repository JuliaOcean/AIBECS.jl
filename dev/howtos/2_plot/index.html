<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Plot basic things · AIBECS.jl</title><meta name="title" content="Plot basic things · AIBECS.jl"/><meta property="og:title" content="Plot basic things · AIBECS.jl"/><meta property="twitter:title" content="Plot basic things · AIBECS.jl"/><meta name="description" content="Documentation for AIBECS.jl."/><meta property="og:description" content="Documentation for AIBECS.jl."/><meta property="twitter:description" content="Documentation for AIBECS.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="AIBECS.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">AIBECS.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/1_ideal_age/">Ideal age</a></li><li><a class="tocitem" href="../../tutorials/2_radiocarbon/">Radiocarbon</a></li><li><a class="tocitem" href="../../tutorials/3_Pmodel/">A coupled PO₄–POP model</a></li><li><a class="tocitem" href="../../tutorials/4_dustmodel/">A dust model</a></li><li><a class="tocitem" href="../../tutorials/5_river_discharge/">River discharge</a></li><li><a class="tocitem" href="../../tutorials/6_groundwater_discharge/">Groundwater discharge</a></li></ul></li><li><span class="tocitem">How-to guides</span><ul><li><a class="tocitem" href="../1_parameters/">Parameters guide</a></li><li class="is-active"><a class="tocitem" href>Plot basic things</a><ul class="internal"><li><a class="tocitem" href="#horizontal-plots"><span>Horizontal plots</span></a></li><li><a class="tocitem" href="#vertical-plots"><span>Vertical plots</span></a></li><li><a class="tocitem" href="#profile-plots"><span>Depth profiles</span></a></li></ul></li><li><a class="tocitem" href="../3_cruiseplot/">Plot transect/cruise data</a></li><li><a class="tocitem" href="../4_fluxes/">Estimate fluxes</a></li></ul></li><li><span class="tocitem">Explanation</span><ul><li><a class="tocitem" href="../../explanation/1_concept/">Concept</a></li><li><a class="tocitem" href="../../explanation/2_tracer_transport_operators/">Tracer transport</a></li></ul></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../../reference/functions/">AIBECS interface (functions and types)</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">How-to guides</a></li><li class="is-active"><a href>Plot basic things</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Plot basic things</a></li></ul></nav><div class="docs-right"><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="plots"><a class="docs-heading-anchor" href="#plots">Plot basic things</a><a id="plots-1"></a><a class="docs-heading-anchor-permalink" href="#plots" title="Permalink"></a></h1><p>This guide is organized as follows</p><ul><li><a href="#horizontal-plots">Horizontal maps</a></li><li><a href="#vertical-plots">Vertical slices</a></li><li><a href="#profile-plots">Depth profiles</a></li></ul><p>In this guide we will focus on how-to plot things using AIBECS&#39; built-in recipes for <a href="https://github.com/JuliaPlots/Plots.jl">Plots.jl</a>. These recipes are implemented using <a href="https://github.com/JuliaPlots/RecipesBase.jl">RecipesBase.jl</a>, which are explained in <a href="https://docs.juliaplots.org/latest/recipes/">Plots.jl&#39;s documentation</a>.</p><p>Throughout we will use the OCIM2 grid and we will create a <code>dummy</code> tracer as a function of location to showcase each plot, just for the sake of the examples herein.</p><pre><code class="language-julia hljs">using Plots
using AIBECS
grd, _ = OCIM2.load()
dummy = cosd.(latvec(grd))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">200160-element Vector{Float64}:
 0.3221204417984906
 0.3546048870425357
 0.38666674294141884
 0.41826780077556525
 0.44937040096716135
 0.4799374779597864
 0.5099326043901359
 0.5393200344991993
 0.5680647467311559
 0.5961324854692254
 ⋮
 0.8854560256532099
 0.8688879687250066
 0.9154080085253663
 0.9009688679024191
 0.8854560256532099
 0.8688879687250066
 0.9154080085253663
 0.9009688679024191
 0.8854560256532099</code></pre><h2 id="horizontal-plots"><a class="docs-heading-anchor" href="#horizontal-plots">Horizontal plots</a><a id="horizontal-plots-1"></a><a class="docs-heading-anchor-permalink" href="#horizontal-plots" title="Permalink"></a></h2><h3 id="Horizontal-slice"><a class="docs-heading-anchor" href="#Horizontal-slice">Horizontal slice</a><a id="Horizontal-slice-1"></a><a class="docs-heading-anchor-permalink" href="#Horizontal-slice" title="Permalink"></a></h3><p>The most common thing you plot after a simulation of marine tracers is a horizontal slice. In this case, you just need to provide the tracer (<code>dummy</code> here), the grid object <code>grd</code>, and the depth at which you want to plot.</p><pre><code class="language-julia hljs">plothorizontalslice(dummy, grd, depth=10)</code></pre><img src="4d28b3b1.svg" alt="Example block output"/><p>You can supply units for the depth at which you want to see the horizontal slice.</p><pre><code class="language-julia hljs">plothorizontalslice(dummy, grd, depth=10u&quot;m&quot;)</code></pre><img src="053e3a38.svg" alt="Example block output"/><p>And the units should be understood under the hood.</p><pre><code class="language-julia hljs">plothorizontalslice(dummy, grd, depth=3u&quot;km&quot;)</code></pre><img src="3e87ace7.svg" alt="Example block output"/><p>If your tracer is supplied with units, those will show in the colorbar label</p><pre><code class="language-julia hljs">plothorizontalslice(dummy * u&quot;mol/m^3&quot;, grd, depth=10u&quot;m&quot;)</code></pre><img src="22c12759.svg" alt="Example block output"/><p>The advantage of Plots.jl recipes like this one is that you can specify other pieces of the plot as you would with built-in functions. The advantage of Plots.jl recipes like this one is that you can specify other pieces of the plot as you would with built-in functions. For example, you can chose the colormap with the <code>color</code> keyword argument.</p><pre><code class="language-julia hljs">dummy .*= cosd.(lonvec(grd))
plt = plothorizontalslice(dummy, grd, depth=100, color=:balance)</code></pre><img src="26b755c7.svg" alt="Example block output"/><p>And you can finetune attributes after the plot is created.</p><pre><code class="language-julia hljs">plot!(plt, xlabel=&quot;Lon&quot;, ylabel=&quot;Lat&quot;, colorbar_title=&quot;dummy value&quot;, title=&quot;The pacific as a whole&quot;)</code></pre><img src="3652fba9.svg" alt="Example block output"/><h2 id="vertical-plots"><a class="docs-heading-anchor" href="#vertical-plots">Vertical plots</a><a id="vertical-plots-1"></a><a class="docs-heading-anchor-permalink" href="#vertical-plots" title="Permalink"></a></h2><p>Exploring the vertical distribution of tracers is important after all.</p><h3 id="Zonal-slices"><a class="docs-heading-anchor" href="#Zonal-slices">Zonal slices</a><a id="Zonal-slices-1"></a><a class="docs-heading-anchor-permalink" href="#Zonal-slices" title="Permalink"></a></h3><p>You must specify the longitude</p><pre><code class="language-julia hljs">dummy = cosd.(latvec(grd))
dummy .+= sqrt.(depthvec(grd)) / 30
plotmeridionalslice(dummy, grd, lon=330)</code></pre><img src="b492b0a1.svg" alt="Example block output"/><h3 id="Zonal-averages"><a class="docs-heading-anchor" href="#Zonal-averages">Zonal averages</a><a id="Zonal-averages-1"></a><a class="docs-heading-anchor-permalink" href="#Zonal-averages" title="Permalink"></a></h3><h4 id="Global-zonal-average"><a class="docs-heading-anchor" href="#Global-zonal-average">Global zonal average</a><a id="Global-zonal-average-1"></a><a class="docs-heading-anchor-permalink" href="#Global-zonal-average" title="Permalink"></a></h4><pre><code class="language-julia hljs">zonalaverage(dummy, grd)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">91×24 Matrix{Float64}:
 NaN         NaN         NaN         …  NaN        NaN        NaN  NaN  NaN
 NaN         NaN         NaN            NaN        NaN        NaN  NaN  NaN
 NaN         NaN         NaN            NaN        NaN        NaN  NaN  NaN
 NaN         NaN         NaN            NaN        NaN        NaN  NaN  NaN
 NaN         NaN         NaN            NaN        NaN        NaN  NaN  NaN
 NaN         NaN         NaN         …  NaN        NaN        NaN  NaN  NaN
   0.364207    0.469204    0.545227     NaN        NaN        NaN  NaN  NaN
   0.397726    0.502722    0.578745     NaN        NaN        NaN  NaN  NaN
   0.430939    0.535935    0.611958       2.2012   NaN        NaN  NaN  NaN
   0.463807    0.568804    0.644827       2.23407    2.36494  NaN  NaN  NaN
   ⋮                                 ⋱               ⋮                  
   0.430939    0.535935    0.611958     NaN        NaN        NaN  NaN  NaN
   0.397726    0.502722    0.578745     NaN        NaN        NaN  NaN  NaN
   0.364207    0.469204    0.545227     NaN        NaN        NaN  NaN  NaN
   0.330424    0.435421    0.511444  …  NaN        NaN        NaN  NaN  NaN
   0.296416    0.401412    0.477436     NaN        NaN        NaN  NaN  NaN
   0.262223    0.36722     0.443243     NaN        NaN        NaN  NaN  NaN
   0.227887    0.332883    0.408907       1.99815  NaN        NaN  NaN  NaN
   0.193448    0.298444    0.374468       1.96371  NaN        NaN  NaN  NaN
 NaN         NaN         NaN         …  NaN        NaN        NaN  NaN  NaN</code></pre><p>If you want a zonal average over a specific region, you can just mask it out</p><h4 id="Basin-zonal-average"><a class="docs-heading-anchor" href="#Basin-zonal-average">Basin zonal average</a><a id="Basin-zonal-average-1"></a><a class="docs-heading-anchor-permalink" href="#Basin-zonal-average" title="Permalink"></a></h4><p>This is experimental at this stage and relies on <a href="https://github.com/briochemc/OceanBasins.jl">OceanBasins.jl</a>. You can create basin masks using this package with</p><pre><code class="language- hljs">using OceanBasins
OCEANS = oceanpolygons()
basins = sum(i*isbasin(latvec(grd), lonvec(grd), OCEANS) for (i,isbasin) in enumerate([isindian2, ispacific2, isatlantic2, isantarctic]))
plothorizontalslice(basins, grd, depth=0, seriestype=:heatmap, color=:lightrainbow)</code></pre><p>and you can mask a specific region with the <code>mask</code> keyword argument</p><pre><code class="language- hljs">mPAC = ispacific(latvec(grd), lonvec(grd), OCEANS)
plotzonalaverage(dummy, grd, mask=mPAC)</code></pre><h3 id="Meridional-slices"><a class="docs-heading-anchor" href="#Meridional-slices">Meridional slices</a><a id="Meridional-slices-1"></a><a class="docs-heading-anchor-permalink" href="#Meridional-slices" title="Permalink"></a></h3><p>Just as you should expect at this stage, you can plot a meridional slice with</p><pre><code class="language-julia hljs">plotmeridionalslice(dummy, grd, lon=-30)</code></pre><img src="4acc323a.svg" alt="Example block output"/><h2 id="profile-plots"><a class="docs-heading-anchor" href="#profile-plots">Depth profiles</a><a id="profile-plots-1"></a><a class="docs-heading-anchor-permalink" href="#profile-plots" title="Permalink"></a></h2><p>Sometimes you want a profile at a given station or location</p><pre><code class="language-julia hljs">plotdepthprofile(dummy, grd, lonlat=(-30,30))</code></pre><img src="09058537.svg" alt="Example block output"/><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../1_parameters/">« Parameters guide</a><a class="docs-footer-nextpage" href="../3_cruiseplot/">Plot transect/cruise data »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Friday 29 November 2024 04:13">Friday 29 November 2024</span>. Using Julia version 1.11.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
